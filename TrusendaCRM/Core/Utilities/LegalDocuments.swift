import Foundation
import UIKit

/// Legal documents for Terms & Conditions and Privacy Policy
/// Maintains enterprise-grade compliance and formatting
struct LegalDocuments {
    
    // MARK: - Terms and Conditions
    
    static let termsVersion = "1.0"
    static let termsEffectiveDate = "October 16, 2025"
    
    static let termsAndConditions = """
TRUSENDA TERMS AND CONDITIONS

Last Updated: October 16, 2025
Effective Date: October 16, 2025
Version: 1.0

IMPORTANT LEGAL NOTICE

PLEASE READ THESE TERMS CAREFULLY BEFORE USING THE SERVICE. BY CLICKING "I AGREE," DOWNLOADING, INSTALLING, OR ACCESSING THE SERVICE, YOU AGREE TO BE LEGALLY BOUND BY THESE TERMS. IF YOU DO NOT AGREE, DO NOT USE THE SERVICE.

THESE TERMS CONTAIN A BINDING ARBITRATION CLAUSE AND CLASS ACTION WAIVER IN SECTION 13 THAT AFFECT YOUR LEGAL RIGHTS. YOU ARE WAIVING YOUR RIGHT TO A JURY TRIAL AND TO PARTICIPATE IN CLASS ACTIONS.

These Terms and Conditions ("Terms") constitute a legally binding agreement between you ("User," "you," or "your") and Trusenda, LLC, a Florida limited liability company with its principal place of business in Palm Beach, Florida ("Provider," "Company," "we," "us," or "our").

1. ACCEPTANCE AND MODIFICATION OF TERMS

1.1 Binding Agreement
By downloading, installing, accessing, or using the Service, you acknowledge that you have read, understood, and agree to be bound by these Terms, our Privacy Policy (incorporated by reference), and all applicable laws and regulations.

1.2 Data Roles and Processing
• Customer Content (Your Data): For all data you upload, collect, or process through the Service—YOU are the data controller/business. Trusenda acts solely as your data processor/service provider.
• Account Data: For information about your account, billing, and usage analytics, Trusenda is the data controller/business.

1.3 Modifications
We reserve the right to modify these Terms at any time. We will provide notice of material changes via email at least thirty (30) days before the effective date. Your continued use after changes constitutes acceptance.

2. LICENSE GRANT AND SERVICE DESCRIPTION

2.1 License Grant
Subject to compliance with these Terms, we grant you a limited, non-exclusive, non-transferable, revocable license to use the Service for your internal business purposes.

2.2 License Restrictions
You may NOT:
• Modify, reverse engineer, or create derivative works
• Rent, lease, sell, or sublicense the Service
• Remove proprietary notices
• Use the Service to develop competing products
• Violate applicable laws

2.3 AI and Machine Learning Features
AI Features may be inaccurate, incomplete, or biased. You are solely responsible for verifying AI-generated outputs and ensuring compliance with anti-discrimination laws.

3. ACCEPTABLE USE POLICY

3.1 Prohibited Activities
You shall NOT:
• Access unauthorized areas or circumvent security
• Introduce viruses or harmful code
• Upload illegal, fraudulent, or infringing content
• Send spam or violate CAN-SPAM, TCPA regulations
• Contact individuals without required legal consent
• Violate fair housing or anti-discrimination laws

3.2 Communications Compliance
If using the Service for email/SMS:
• Obtain required consents (TCPA, CAN-SPAM)
• Honor opt-out requests immediately
• Include required disclosures
• Do NOT use purchased or scraped lists

3.3 No Sensitive Personal Information
DO NOT store:
• Government IDs (SSN, passport numbers)
• Financial account numbers, credit cards
• Health information (HIPAA data)
• Biometric or genetic data
• Information about minors under 13

If you upload Sensitive Data in violation, you assume ALL liability.

3.4 Update Requirements
You must install software updates within thirty (30) days. Outdated versions may be remotely disabled for security.

4. CUSTOMER CONTENT AND OWNERSHIP

4.1 Your Ownership
You retain all ownership rights to Customer Content. You are the data controller; we are your processor.

4.2 License to Provider
You grant us a license to use Customer Content ONLY to:
• Provide and maintain the Service
• Perform backups
• Create anonymized analytics (with no re-identification)

We will NOT use your identifiable data to train AI without explicit consent.

4.3 Your Backup Responsibility
YOU ARE SOLELY RESPONSIBLE FOR BACKING UP DATA. The Service is not a backup solution. Data loss may occur due to termination, failures, or security incidents.

5. INTELLECTUAL PROPERTY

The Service, including all software, algorithms, AI models, designs, and trademarks, is owned by us and protected by intellectual property laws. No ownership rights transfer to you.

6. PRIVACY AND DATA SECURITY

6.1 Privacy Policy
Our data practices are governed by our Privacy Policy at trusenda.com/legal/privacy, incorporated by reference.

6.2 Security Measures
We implement encryption (TLS 1.3, AES-256), access controls, monitoring, and security audits. However, NO SYSTEM IS COMPLETELY SECURE.

6.3 Data Breach Notification
We will notify you without undue delay if a breach affects your data, consistent with applicable law.

6.4 International Data Transfers
Data may be processed in the United States and other countries. For EEA/UK users, we use Standard Contractual Clauses.

6.5 Data Retention
• Account Data: Life of account + 60 days
• Customer Content: Life of account + 30 days
• Backups: 90 days
• Logs: 13 months

7. DISCLAIMERS AND WARRANTIES

7.1 AS-IS BASIS
THE SERVICE IS PROVIDED "AS IS" WITHOUT WARRANTIES OF ANY KIND. WE DISCLAIM ALL WARRANTIES OF MERCHANTABILITY, FITNESS FOR PURPOSE, NON-INFRINGEMENT, ACCURACY, RELIABILITY, OR UNINTERRUPTED OPERATION.

7.2 No Professional Advice
THE SERVICE IS A SOFTWARE TOOL ONLY, NOT LEGAL, FINANCIAL, REAL ESTATE BROKERAGE, OR PROFESSIONAL ADVICE. You are responsible for compliance with all applicable laws and obtaining appropriate professional advice.

7.3 No Guarantee of Results
We do not guarantee increased leads, conversions, sales, or revenue. Results depend on factors beyond our control.

8. LIMITATION OF LIABILITY

8.1 Exclusion of Damages
WE SHALL NOT BE LIABLE FOR INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, INCLUDING:
• Loss of profits, revenue, or business
• Loss of data or Customer Content
• Business interruption or system downtime
• Regulatory fines or compliance costs
• AI/ML errors or biased outputs

8.2 Liability Cap
OUR AGGREGATE LIABILITY SHALL NOT EXCEED THE GREATER OF:
(A) Fees paid in the twelve (12) months preceding the claim; OR
(B) $100 USD

8.3 Data Breach Liability Cap
For data breaches specifically, liability shall not exceed the LESSER of fees paid in 12 months OR $10,000 USD.

9. INDEMNIFICATION

9.1 Your Indemnification Obligations (UNCAPPED)
You agree to indemnify and defend us from ALL claims arising from:
• Your use or misuse of the Service
• Customer Content you provide
• Your violation of laws (fair housing, TCPA, CAN-SPAM, RESPA, licensing)
• Marketing communications you send
• TCPA violations or spam claims
• Storage of Sensitive Data in violation of Section 3.3
• Security breaches caused by your negligence
• Use of AI Features resulting in discrimination claims

YOUR INDEMNIFICATION IS UNLIMITED AND UNCAPPED, independent of liability limits in Section 8.

10. PAYMENT TERMS

10.1 Subscription Fees
Fees are billed in advance monthly or annually. All fees are non-refundable except as required by law.

10.2 Automatic Renewal
Subscriptions auto-renew unless you cancel before renewal date.

10.3 Price Changes
We may change fees upon thirty (30) days' notice. Continued use constitutes acceptance.

10.4 Taxes
You are responsible for all taxes except those based on our net income.

11. TERMINATION

11.1 Termination by You
Cancel anytime through account settings. No refunds for prepaid fees.

11.2 Termination by Provider
We may terminate immediately for:
• Violation of Terms
• Non-payment
• Fraudulent or illegal activity
• Security risks
• Business reasons

11.3 Effect of Termination
Upon termination:
• Your license terminates immediately
• We may delete Customer Content after 30 days
• You must uninstall all software
• Outstanding fees become due

12. GENERAL PROVISIONS

12.1 Governing Law
These Terms are governed by the laws of the State of Florida, excluding conflict of law principles.

12.2 Jurisdiction and Venue
Exclusive jurisdiction and venue: state and federal courts in Palm Beach County, Florida.

12.3 Entire Agreement
These Terms, Privacy Policy, and DPA constitute the entire agreement, superseding all prior agreements.

12.4 Severability
If any provision is unenforceable, it shall be modified to the minimum extent necessary, and remaining provisions remain in effect.

12.5 No Waiver
Failure to enforce any provision does not waive our right to enforce it later.

12.6 Assignment
You may not assign these Terms. We may assign without consent.

12.7 Force Majeure
We are not liable for delays or failures due to events beyond reasonable control (natural disasters, war, terrorism, pandemics, government actions, infrastructure failures).

13. DISPUTE RESOLUTION AND ARBITRATION

13.1 Binding Arbitration
ANY DISPUTE ARISING FROM THESE TERMS SHALL BE RESOLVED BY BINDING ARBITRATION, NOT COURT LITIGATION.

13.2 Class Action Waiver
YOU WAIVE YOUR RIGHT TO PARTICIPATE IN CLASS ACTIONS, CLASS ARBITRATIONS, OR REPRESENTATIVE PROCEEDINGS.

13.3 Arbitration Rules
• Governed by Federal Arbitration Act
• Administered by JAMS or AAA
• One arbitrator
• Location: Palm Beach County, Florida (or video)
• Each party bears own costs unless arbitrator awards fees

13.4 Exceptions
Either party may seek injunctive relief in court for:
• Intellectual property violations
• Confidentiality breaches
• Immediate harm prevention

13.5 Opt-Out Right
You may opt out of arbitration by emailing legal@trusenda.com within 30 days of first accepting these Terms.

14. CONTACT INFORMATION

For questions about these Terms:
Email: legal@trusenda.com
Support: support@trusenda.com
Address: Trusenda, LLC, Palm Beach, FL

By using the Service, you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions.

END OF TERMS AND CONDITIONS
"""
    
    // MARK: - Privacy Policy
    
    static let privacyVersion = "1.0"
    static let privacyEffectiveDate = "October 16, 2025"
    
    static let privacyPolicy = """
TRUSENDA PRIVACY POLICY

Last Updated: October 16, 2025
Effective Date: October 16, 2025
Version: 1.0

This Privacy Policy describes how Trusenda, LLC ("Trusenda," "we," "us," or "our") collects, uses, discloses, and protects information when you use our Service.

1. INFORMATION WE COLLECT

1.1 Account Information
• Email address
• Name
• Password (hashed and encrypted)
• Organization name
• Subscription plan and billing information

1.2 Customer Content (Your Data)
YOU control all lead and contact data you store in the Service. For this data, YOU are the data controller and Trusenda is your data processor.

1.3 Usage and Analytics Data
• Device type and operating system
• App version and performance metrics
• Feature usage patterns (anonymized)
• Crash reports and diagnostic data
• Authentication logs

1.4 Communications
• Support tickets and correspondence
• Feedback and survey responses

2. HOW WE USE YOUR INFORMATION

2.1 Service Delivery
• Provide, maintain, and improve the Service
• Process payments and billing
• Authenticate users and prevent fraud
• Provide customer support

2.2 Analytics and Improvement
• Analyze usage patterns to improve features
• Develop new functionality
• Optimize performance and fix bugs
• Train AI models (using anonymized data only, never your identifiable Customer Content without consent)

2.3 Communications
• Send service announcements and updates
• Respond to inquiries and support requests
• Send billing notifications
• Notify of Terms/Privacy Policy changes (with 30 days notice for material changes)

2.4 Legal Compliance
• Comply with legal obligations
• Respond to subpoenas and court orders
• Enforce our Terms and Conditions
• Protect rights, property, and safety

3. INFORMATION SHARING AND DISCLOSURE

3.1 Service Providers (Subprocessors)
We engage third-party service providers for:
• Cloud hosting and infrastructure
• Payment processing (Stripe)
• Email delivery
• Analytics and monitoring
• Customer support tools

Current subprocessor list: trusenda.com/legal/subprocessors

3.2 Legal Requirements
We may disclose information to comply with:
• Legal process (subpoenas, court orders)
• Government requests
• Fraud prevention and security investigations
• Protection of rights and safety

3.3 Business Transfers
If we are acquired or merge with another company, your information may be transferred as part of that transaction.

3.4 With Your Consent
We may share information for other purposes with your explicit consent.

3.5 What We DON'T Do
• We do NOT sell your personal information
• We do NOT use your Customer Content to train AI without explicit consent
• We do NOT share your data for third-party marketing

4. DATA SECURITY

4.1 Security Measures
• Encryption in transit (TLS 1.3/1.2)
• Encryption at rest (AES-256)
• Secure password hashing (bcrypt/Argon2)
• Multi-factor authentication options
• Regular security audits and penetration testing
• Employee access controls (least privilege)
• Security monitoring and intrusion detection

4.2 Security Limitations
NO SYSTEM IS COMPLETELY SECURE. We cannot guarantee that unauthorized access, data loss, or breaches will never occur. You accept the inherent risks of internet-based services.

4.3 Your Security Responsibilities
• Keep passwords secure and confidential
• Enable multi-factor authentication
• Install software updates promptly
• Maintain device security (antivirus, OS updates)
• Report suspected security incidents immediately

5. DATA RETENTION

• Account Data: Life of account + 60 days
• Customer Content: Life of account + 30 days
• Backups: 90-day rolling retention
• Logs: 13 months
• Billing records: 7 years (legal requirement)

After retention periods, we securely delete or anonymize data so it can no longer identify you.

6. YOUR RIGHTS AND CHOICES

6.1 Access and Correction
You may access and update your account information through the Service settings.

6.2 Data Export
You may export your Customer Content in JSON format through the Service.

6.3 Account Deletion
You may delete your account at any time through Settings. This will permanently delete your Account Data and Customer Content after 30 days.

6.4 Marketing Communications
You may opt out of marketing emails by clicking "Unsubscribe" in any marketing message.

6.5 Rights Under Privacy Laws
Depending on your location, you may have additional rights:

GDPR (EEA/UK) Rights:
• Right to access your personal data
• Right to rectification (correction)
• Right to erasure ("right to be forgotten")
• Right to restrict processing
• Right to data portability
• Right to object to processing
• Right to withdraw consent
• Right to lodge a complaint with a supervisory authority

CCPA/CPRA (California) Rights:
• Right to know what personal information is collected
• Right to know if personal information is sold or shared
• Right to opt out of sale/sharing
• Right to delete personal information
• Right to correct inaccurate information
• Right to limit use of sensitive personal information
• Right to non-discrimination for exercising rights

To exercise these rights, contact: privacy@trusenda.com or dpo@trusenda.com

We will respond within the timeframes required by applicable law (typically 30-45 days).

7. INTERNATIONAL DATA TRANSFERS

Your data may be transferred to and processed in the United States and other countries where we or our service providers operate. These countries may have different data protection laws than your jurisdiction.

For EEA/UK/Swiss users:
• We use Standard Contractual Clauses (SCCs) approved by European Commission/UK ICO
• We implement supplementary security measures
• We conduct Transfer Impact Assessments (TIAs)

8. CHILDREN'S PRIVACY

The Service is NOT intended for children under 13 (or 16 in some jurisdictions). We do not knowingly collect information from children. If we discover we have collected a child's information, we will delete it immediately.

9. DO NOT TRACK SIGNALS

Our Service does not respond to Do Not Track (DNT) signals as there is no industry standard for DNT compliance.

10. COOKIES AND TRACKING

10.1 Cookies We Use
• Essential cookies (authentication, session management)
• Analytics cookies (anonymized usage patterns)
• Preference cookies (settings, language)

10.2 Third-Party Tracking
Third-party services may use cookies for analytics or advertising. We do not control their practices. Review their privacy policies.

10.3 Your Choices
You can disable cookies in your browser settings, but this may affect Service functionality.

11. CALIFORNIA PRIVACY DISCLOSURES

11.1 CCPA/CPRA Categories
Personal Information Collected (last 12 months):
• Identifiers: email, name, device ID
• Commercial information: subscription, billing
• Internet activity: usage logs, analytics
• Geolocation: approximate location (city/state level)

Purpose: Service delivery, analytics, fraud prevention

Sharing: Service providers only (no sale)

11.2 Right to Opt Out
We do NOT sell personal information. If our practices change, we will provide an opt-out mechanism.

11.3 Non-Discrimination
We will not discriminate against you for exercising CCPA/CPRA rights.

12. NEVADA PRIVACY RIGHTS

Nevada residents may opt out of the sale of personal information. We do not currently sell information, but you may submit an opt-out request to privacy@trusenda.com.

13. CHANGES TO PRIVACY POLICY

We may update this Privacy Policy from time to time. We will notify you of material changes via email at least thirty (30) days before the effective date. Your continued use after changes constitutes acceptance.

14. CONTACT US

For privacy questions or to exercise your rights:

Email: privacy@trusenda.com
Data Protection Officer: dpo@trusenda.com
Support: support@trusenda.com
Address: Trusenda, LLC, Palm Beach, FL

For GDPR/UK GDPR inquiries, our Data Protection Officer is available at dpo@trusenda.com.

15. DATA PROCESSING ADDENDUM

For users subject to GDPR, CCPA, or other privacy regulations, our Data Processing Addendum (DPA) is available at trusenda.com/legal/dpa and governs the processing of Customer Content.

By using the Service, you acknowledge that you have read and understood this Privacy Policy.

END OF PRIVACY POLICY
"""
    
    // MARK: - Helper Methods
    
    /// Returns a formatted summary for quick display
    static func getSummary() -> String {
        return """
        By signing up, you agree to our Terms and Conditions (including arbitration, liability limits, and indemnification) and our Privacy Policy.
        
        Key points:
        • We act as your data processor for customer data
        • You are responsible for legal compliance
        • No sensitive data (SSN, health info, financial accounts)
        • Subscriptions auto-renew and are non-refundable
        • Binding arbitration and class action waiver apply
        • We use encryption and security best practices
        • You retain ownership of your data
        """
    }
    
    /// Log acceptance with timestamp for compliance
    static func logAcceptance(userId: String, documentType: String) {
        let timestamp = ISO8601DateFormatter().string(from: Date())
        let deviceId = UIDevice.current.identifierForVendor?.uuidString ?? "unknown"
        
        let acceptanceRecord = [
            "userId": userId,
            "documentType": documentType,
            "version": documentType == "terms" ? termsVersion : privacyVersion,
            "timestamp": timestamp,
            "deviceId": deviceId
        ]
        
        // Store in UserDefaults for local record
        var acceptances = UserDefaults.standard.array(forKey: "legalAcceptances") as? [[String: String]] ?? []
        acceptances.append(acceptanceRecord)
        UserDefaults.standard.set(acceptances, forKey: "legalAcceptances")
        
        // TODO: Send to backend for permanent record when endpoint is ready
        // API.logLegalAcceptance(acceptanceRecord)
        
        print("✅ Legal acceptance logged: \(documentType) v\(acceptanceRecord["version"] ?? "unknown") at \(timestamp)")
    }
}

